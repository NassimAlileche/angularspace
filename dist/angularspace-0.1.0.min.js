"use strict";mainAppModule.controller("ActiveController",["$scope","$http","ActiveService",function($scope,$http,ActiveService){ActiveService.someAsyncMethod().success(function(response){$scope.customernames=response.records}).error(function(){console.log("error ActiveService.someAsyncMethod")})}]).directive("ActiveDirective",function(){}).service("ActiveService",function($http,API_URL){function someAsyncMethod(){return $http({method:"GET",url:API_URL,cache:!0})}return{someAsyncMethod:someAsyncMethod}});var beerCounterModule=angular.module("BeerCounterModule",["componentsModule"]);beerCounterModule.controller("BeerCounterController",function($scope,$locale){$scope.beers=[0,1,2,3,4,5,6,7],$scope.beerForms="en-us"==$locale.id?{0:"no beers",one:"{} beer",other:"{} beers"}:{0:"žiadne pivo",one:"{} pivo",few:"{} pivá",other:"{} pív"}});var componentsModule=angular.module("componentsModule",[]).directive("tabs",function(){return{restrict:"g",transclude:!0,scope:{},controller:function($scope){var panes=$scope.panes=[];$scope.select=function(pane){angular.forEach(panes,function(pane){pane.selected=!1}),pane.selected=!0},this.addPane=function(pane){0==panes.length&&$scope.select(pane),panes.push(pane)}},template:'<div class="tabbable"><ul class="nav nav-tabs"><li ng-repeat="pane in panes" ng-class="{active:pane.selected}"><a href="" ng-click="select(pane)">{{pane.title}}</a></li></ul><div class="tab-content" ng-transclude></div></div>',replace:!0}}).directive("pane",function(){return{require:"^tabs",restrict:"E",transclude:!0,scope:{title:"@"},link:function(scope,element,attrs,tabsController){tabsController.addPane(scope)},template:'<div class="tab-pane" ng-class="{active: selected}" ng-transclude></div>',replace:!0}});mainAppModule.controller("GalleryController",["$scope",function($scope){var imagePath="source/static/images/";$scope.galleryTitle="My Gallery",$scope.galleryImages=[{main:imagePath+"image01.png",thumb:imagePath+"image01.png",title:"Image 1",description:"Image 1 description"},{main:imagePath+"image02.png",thumb:imagePath+"image02.png",title:"Image 2",description:"Image 2 description"},{main:imagePath+"image03.png",thumb:imagePath+"image03.png",title:"Image 3",description:"Image 3 description"},{main:imagePath+"image04.png",thumb:imagePath+"image04.png",title:"Image 4",description:"Image 4 description"}]}]).directive("dirGallery",function(){return{restrict:"A",scope:{title:"=galleryTitle",images:"=galleryImages"},controller:function($scope){$scope.mainImage=$scope.images[0],$scope.showMainImage=!1,$scope.selectImage=function(image){$scope.showMainImage=!0,$scope.mainImage=image},$scope.close=function(e){e&&e.preventDefault(),$scope.showMainImage=!1}},templateUrl:"source/app/views/directives/dirGallery.html"}}),mainAppModule.config(["$httpProvider",function($httpProvider){$httpProvider.interceptors.push("HttpInterceptor")}]).factory("HttpInterceptor",["$log","$q","$injector","$rootScope",function($log,$q,$injector,$rootScope){$log.debug("HTTP Interceptor");var httpInterceptor={request:function(config){console.log("request",config);var LocalStorageService=$injector.get("LocalStorageService");return LocalStorageService.isKey("access")&&(config.headers.Authorization="Bearer "+LocalStorageService.get("access"),angular.isDefined(config.cache)&&typeof config.cache===!0&&(config.cache=!1)),$rootScope.$broadcast("httpRequest",config),config},requestError:function(rejection){return $rootScope.$broadcast("httpRequestError",rejection),$q.reject(rejection)},response:function(response){return $rootScope.$broadcast("httpResponse",response),response},responseError:function(rejection){switch(rejection.status){case 401:}return $rootScope.$broadcast("httpResponseError",rejection),$q.reject(rejection)}};return httpInterceptor}]),mainAppModule.service("LocalStorageService",function($window,$rootScope){function save(data){if("object"==typeof data){for(var key in data)if(data.hasOwnProperty(key)){var value=data[key];"object"==typeof value&&(value=JSON.stringify(value)),$window.localStorage.setItem(key,value)}return $rootScope.$broadcast("LocalStorageUpdatedEvent"),!0}return!1}function get(key){var output=null;if(isKey(key))try{output=JSON.parse($window.localStorage[key])}catch(err){alert(err)}return output}function isKey(key){try{if($window.localStorage.getItem(key))return!0}catch(err){return!1}return!1}function remove(key){try{return $window.localStorage.removeKey(key),$rootScope.$broadcast("LocalStorageUpdatedEvent"),!0}catch(err){return!1}return!1}function flush(){try{return $window.localStorage.clear(),$rootScope.$broadcast("LocalStorageUpdatedEvent"),!0}catch(err){return!1}return!1}function getLength(){return $window.localStorage.length()}return{get:get,save:save,isKey:isKey,"delete":remove,flush:flush,length:getLength}});var mainAppModule=angular.module("MainAppModule",["ngRoute","ngMessages","ui.bootstrap","BeerCounterModule"]);mainAppModule.constant("API_REST_URL","https://myapi.domain.org/"),mainAppModule.constant("API_GITHUB_URL","https://api.github.com/users/NassimAlileche/repos"),mainAppModule.constant("API_URL","http://www.w3schools.com/angular/customers.php"),mainAppModule.constant("TEMPLATES_ROOT","source/app/views/templates/"),mainAppModule.run(function($rootScope,API_URL){$rootScope.API_URL=API_URL}),mainAppModule.config(function($routeProvider,TEMPLATES_ROOT){var root=TEMPLATES_ROOT;$routeProvider.when("/",{templateUrl:root+"index.html"}).when("/active",{templateUrl:root+"active.html",controller:"ActiveController"}).when("/gallery",{templateUrl:root+"gallery.html",controller:"GalleryController"}).when("/todolist",{templateUrl:root+"todolist.html",controller:"TodoListController"}).when("/beer",{templateUrl:root+"beercounter.html",controller:"BeerCounterController"}).otherwise({redirectTo:"/"})}),mainAppModule.controller("TodoListController",["$scope",function(){var todoList=this;todoList.todos=[{text:"Learn angular",done:!0},{text:"Build an angular app",done:!1}],todoList.addTodo=function(){todoList.todos.push({text:todoList.todoText,done:!1}),todoList.todoText=""},todoList.remaining=function(){var count=0;return angular.forEach(todoList.todos,function(todo){count+=todo.done?0:1}),count},todoList.archive=function(){var oldTodos=todoList.todos;todoList.todos=[],angular.forEach(oldTodos,function(todo){todo.done||todoList.todos.push(todo)})}}]);